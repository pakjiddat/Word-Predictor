<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Develop Text Prediction Models Based on N-Grams • wordpredictor</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Develop Text Prediction Models Based on N-Grams">
<meta name="description" content='A framework for developing n-gram models for text prediction. It provides data cleaning, data sampling, extracting tokens from text, model generation, model evaluation and word prediction. For information on how n-gram models work we referred to: "Speech and Language Processing" &lt;https://web.archive.org/web/20240919222934/https%3A%2F%2Fweb.stanford.edu%2F~jurafsky%2Fslp3%2F3.pdf&gt;. For optimizing R code and using R6 classes we referred to "Advanced R" &lt;https://adv-r.hadley.nz/r6.html&gt;. For writing R extensions we referred to "R Packages", &lt;https://r-pkgs.org/index.html&gt;.'>
<meta property="og:description" content='A framework for developing n-gram models for text prediction. It provides data cleaning, data sampling, extracting tokens from text, model generation, model evaluation and word prediction. For information on how n-gram models work we referred to: "Speech and Language Processing" &lt;https://web.archive.org/web/20240919222934/https%3A%2F%2Fweb.stanford.edu%2F~jurafsky%2Fslp3%2F3.pdf&gt;. For optimizing R code and using R6 classes we referred to "Advanced R" &lt;https://adv-r.hadley.nz/r6.html&gt;. For writing R extensions we referred to "R Packages", &lt;https://r-pkgs.org/index.html&gt;.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">wordpredictor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/features.html">Features</a></li>
    <li><a class="dropdown-item" href="articles/overview.html">Overview</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pakjiddat/word-predictor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of the wordpredictor package is to provide a flexible and easy to use framework for generating <a href="https://en.wikipedia.org/wiki/N-gram" class="external-link">n-gram models</a> for word prediction.</p>
<p>The package allows generating n-gram models from input text files. It also allows exploring n-grams using plots. Additionally it provides methods for measuring n-gram model performance using <a href="https://en.wikipedia.org/wiki/Perplexity" class="external-link">Perplexity</a> and accuracy.</p>
<p>The n-gram model may be customized using several options such as n-gram size, data cleaning options and options for tokenization.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of wordpredictor from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"wordpredictor"</span><span class="op">)</span></span></code></pre></div>
<p>And the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"pakjiddat/word-predictor"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-structure">Package structure<a class="anchor" aria-label="anchor" href="#package-structure"></a>
</h2>
<p>The wordpredictor package is based on <strong>R6 classes</strong>. It is easy to customize and improve. It provides the following classes:</p>
<ol style="list-style-type: decimal">
<li>
<strong>DataAnalyzer</strong>. It allows analyzing n-grams.</li>
<li>
<strong>DataCleaner</strong>. It allows cleaning text files. It supports several data cleaning options.</li>
<li>
<strong>DataSampler</strong>. It allows generating sample files of specified size from a text file. It also allows generating train, test and validation sample files from a given input text file.</li>
<li>
<strong>TokenGenerator</strong>. It allows generating n-gram tokens of given size.</li>
<li>
<strong>TPGenerator</strong>. It allows generating transition probabilities for the given n-gram file.</li>
<li>
<strong>ModelGenerator</strong>. It allows generating n-gram models using different configuration options.</li>
<li>
<strong>ModelEvaluator</strong>. It allows evaluating the performance of n-gram models. 4 metrics are used to compare the performance. These are: Perplexity, accuracy, memory and time taken.</li>
<li>
<strong>ModelPredictor</strong>. It allows predicting the next word, given a set of previous words.</li>
<li>
<strong>Base</strong>. The base class for all the other classes. It allows provides methods for reading and writing files and processing large text files.</li>
</ol>
<p>Information about the package can be obtained using the command line or the package website. For example, the command: <strong>?wordpredictor</strong> returns information about how the given class works and the parameter details for each class method.</p>
</div>
<div class="section level2">
<h2 id="environment-setup-code">Environment setup code<a class="anchor" aria-label="anchor" href="#environment-setup-code"></a>
</h2>
<p>The following code should be run before running the examples.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pakjiddat/word-predictor" class="external-link">wordpredictor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The level of verbosity in the information messages</span></span>
<span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Used to setup the test environment</span></span>
<span><span class="co">#' @param rf The required files.</span></span>
<span><span class="co">#' @param ve The verbosity level.</span></span>
<span><span class="co">#' @return The list of directories in the test environment</span></span>
<span><span class="va">setup_env</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># An object of class EnvManager is created</span></span>
<span>    <span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>rp <span class="op">=</span> <span class="st">"../"</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span>    <span class="co"># The required files are downloaded</span></span>
<span>    <span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ed</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Used to clean up the test environment</span></span>
<span><span class="va">clean_up</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># An object of class EnvManager is created</span></span>
<span>    <span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span>    <span class="co"># The test environment is removed</span></span>
<span>    <span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="cn">F</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-the-model">Generating the model<a class="anchor" aria-label="anchor" href="#generating-the-model"></a>
</h2>
<p>The following example shows how to generate a n-gram model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The following code generates n-gram model using default options for data</span></span>
<span><span class="co"># cleaning and tokenization. See the following section on how to customize these</span></span>
<span><span class="co"># options. Note that input.txt is the name of the input data file. It should be</span></span>
<span><span class="co"># present in the data directory. ddir is the data directory. mdir is the model</span></span>
<span><span class="co"># directory. The output model file, which is def-model.RDS will be placed in</span></span>
<span><span class="co"># this directory.</span></span>
<span></span>
<span><span class="co"># ModelGenerator class object is created</span></span>
<span><span class="va">mg</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/ModelGenerator.html">ModelGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"def-model"</span>,</span>
<span>    desc <span class="op">=</span> <span class="st">"N-gram model generating using default options"</span>,</span>
<span>    fn <span class="op">=</span> <span class="st">"def-model.RDS"</span>,</span>
<span>    df <span class="op">=</span> <span class="st">"input.txt"</span>,</span>
<span>    n <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    ssize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    dir <span class="op">=</span> <span class="va">ed</span>,</span>
<span>    dc_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    tg_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    ve <span class="op">=</span> <span class="va">ve</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generates n-gram model. The output is the file def-model.RDS</span></span>
<span><span class="va">mg</span><span class="op">$</span><span class="fu">generate_model</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The above code generates the file <strong>def-model.RDS</strong>. This file represents the n-gram model.</p>
</div>
<div class="section level2">
<h2 id="predicting-words">Predicting words<a class="anchor" aria-label="anchor" href="#predicting-words"></a>
</h2>
<p>The following example shows how to predict the next word given a set of words:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class ModelPredictor is created. The mf parameter is the name of</span></span>
<span><span class="co"># the model file that was generated in the previous example.</span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span><span class="op">)</span></span>
<span><span class="co"># Given the words: "how are", the next word is predicted. The top 3 most likely</span></span>
<span><span class="co"># next words are returned along with their respective probabilities.</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">predict_word</span><span class="op">(</span>words <span class="op">=</span> <span class="st">"how are"</span>, <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analyzing-n-grams">Analyzing N-grams<a class="anchor" aria-label="anchor" href="#analyzing-n-grams"></a>
</h2>
<p>The wordpredictor package includes a class called <strong>DataAnalyzer</strong>, that can be used to get an idea of the frequency distribution of n-grams in a model. The model generation process described above, creates an n-gram file in the model directory.</p>
<p>For each n-gram number less than or equal to the n-gram size of the model, a n-gram file is generated. In the example above the n-gram size of the model is 4. So 4 n-gram files are generated in the model folder. These files are: <strong>n1.RDS, n2.RDS, n3.RDS and n4.RDS</strong>. The <strong>n2.RDS</strong> file contains n-grams of size 2.</p>
<p>The following example plots the top 10 most occurring bi-grams along with their frequencies:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class DataAnalyzer is created. The fn parameter is the path to</span></span>
<span><span class="co"># the n-gram file.</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>fn <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span>
<span><span class="co"># The top 10 most occurring features are plotted</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">plot_n_gram_stats</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"type"</span> <span class="op">=</span> <span class="st">"top_features"</span>,</span>
<span>  <span class="st">"n"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  <span class="st">"save_to"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"dir"</span> <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-analyze-ngrams-1-1.png"><!-- --></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The following example plots the n-gram frequency coverage. It shows the percentage of n-grams with frequency 1, 2 … 10.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class DataAnalyzer is created. The fn parameter is the path to</span></span>
<span><span class="co"># the n-gram file.</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>fn <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span>
<span><span class="co"># The top 10 most occurring features are plotted</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">plot_n_gram_stats</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"type"</span> <span class="op">=</span> <span class="st">"coverage"</span>,</span>
<span>  <span class="st">"n"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  <span class="st">"save_to"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"dir"</span> <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-analyze-ngrams-2-1.png"><!-- --></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The following example shows how to get the list of bi-grams starting with <strong>“great_”</strong> along with their frequencies. It also shows how to get the frequency of the bi-gram <strong>“great_deal”</strong>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class DataAnalyzer is created. The fn parameter is the path to</span></span>
<span><span class="co"># the n-gram file.</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Bi-grams starting with "great_" are returned</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">get_ngrams</span><span class="op">(</span>fn <span class="op">=</span> <span class="va">fn</span>, c <span class="op">=</span> <span class="fl">10</span>, pre <span class="op">=</span> <span class="st">"^great_*"</span><span class="op">)</span></span>
<span><span class="co"># The data frame is sorted by frequency</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">freq</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co"># The frequency of the bi-gram "great_deal"</span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">pre</span> <span class="op">==</span> <span class="st">"great_deal"</span>, <span class="st">"freq"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="customizing-the-n-gram-model">Customizing the n-gram model<a class="anchor" aria-label="anchor" href="#customizing-the-n-gram-model"></a>
</h2>
<p>The <strong>dc_opts</strong> parameter to the <strong>ModelGenerator</strong> class specifies the data cleaning options. The following code shows the data cleaning options and their default values:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># @field dc_opts The options for the data cleaner object.</span></span>
<span><span class="co">#   min_words -&gt; The minimum number of words per sentence.</span></span>
<span><span class="co">#   line_count -&gt; The number of lines to read and clean at a time.</span></span>
<span><span class="co">#   save_data -&gt; If the combined processed lines should be saved.</span></span>
<span><span class="co">#   output_file -&gt; Name of the output file used to store the data.</span></span>
<span><span class="co">#   sw_file -&gt; The stop words file path.</span></span>
<span><span class="co">#   dict_file -&gt; The dictionary file path.</span></span>
<span><span class="co">#   bad_file -&gt; The bad words file path.</span></span>
<span><span class="co">#   to_lower -&gt; If the words should be converted to lower case.</span></span>
<span><span class="co">#   remove_stop -&gt; If stop words should be removed.</span></span>
<span><span class="co">#   remove_punct -&gt; If punctuation symbols should be removed.</span></span>
<span><span class="co">#   remove_non_dict -&gt; If non dictionary words should be removed.</span></span>
<span><span class="co">#   remove_non_alpha -&gt; If non alphabet symbols should be removed.</span></span>
<span><span class="co">#   remove_extra_space -&gt; If leading, trailing and double spaces</span></span>
<span><span class="co">#     should be removed.</span></span>
<span><span class="co">#   remove_bad -&gt; If bad words should be removed</span></span>
<span><span class="va">dc_opts</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"min_words"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="st">"line_count"</span> <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  <span class="st">"save_data"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"output_file"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"sw_file"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"dict_file"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"bad_file"</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="st">"to_lower"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"remove_stop"</span> <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  <span class="st">"remove_punct"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"remove_non_dict"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"remove_non_alpha"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"remove_extra_space"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  <span class="st">"remove_bad"</span> <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <strong>tg_opts</strong> parameter to the <strong>ModelGenerator</strong> class specifies the token generation options. The following code shows the token generation options and their default values:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># @field tg_opts The options for the token generator obj.</span></span>
<span><span class="co">#   min_freq -&gt; All ngrams with frequency less than min_freq are</span></span>
<span><span class="co">#     ignored.</span></span>
<span><span class="co">#   stem_words -&gt; If words should be transformed to their stems.</span></span>
<span><span class="va">tg_opts</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"stem_words"</span> <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  <span class="st">"min_freq"</span> <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="evaluating-model-performance">Evaluating model performance<a class="anchor" aria-label="anchor" href="#evaluating-model-performance"></a>
</h2>
<p>The wordpredictor package allows evaluating n-gram model performance. It can measure the performance of a single model as well as compare the performance of multiple models. When evaluating the performance of a model, intrinsic and extrinsic evaluation is performed.</p>
<p>Intrinsic evaluation measures the Perplexity score for each sentence in a validation text file. It returns the minimum, maximum and mean Perplexity score for the sentences.</p>
<p>Extrinsic evaluation measures the accuracy score for the sentences in a validation text file. It tries to predict the last word of each sentence. If the word was correctly predicted, then the accuracy count is increased. The extrinsic evaluation returns the number of valid and invalid predictions.</p>
<p>The following example shows how to evaluate the performance of a model:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span>, <span class="st">"validate.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The validation file name</span></span>
<span><span class="va">vfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/validate.txt"</span><span class="op">)</span></span>
<span><span class="co"># ModelEvaluator class object is created</span></span>
<span><span class="va">me</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/ModelEvaluator.html">ModelEvaluator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># The performance evaluation is performed. The performance stats are returned as</span></span>
<span><span class="co"># a data frame and also saved within the model file itself.</span></span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="va">me</span><span class="op">$</span><span class="fu">evaluate_performance</span><span class="op">(</span>lc <span class="op">=</span> <span class="fl">20</span>, fn <span class="op">=</span> <span class="va">vfn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="demo">Demo<a class="anchor" aria-label="anchor" href="#demo"></a>
</h2>
<p>The wordpredictor package includes a demo called “word-predictor”. The demo is a Shiny application that displays the ten most likely words for a given set of words. To access the demo, run the following command from the R shell:</p>
<p><strong><code>demo("word-predictor", package = "wordpredictor", ask = F)</code></strong>.</p>
<p>The following is a screenshot of the demo:</p>
<p><img src="reference/figures/README-demo.png" width="70%" height="70%"></p>
</div>
<div class="section level2">
<h2 id="website">Website<a class="anchor" aria-label="anchor" href="#website"></a>
</h2>
<p>The <a href="https://pakjiddat.github.io/word-predictor/">wordpredictor website</a> provides details about how the package works. It includes code samples and details of all the classes and methods.</p>
</div>
<div class="section level2">
<h2 id="benefits">Benefits<a class="anchor" aria-label="anchor" href="#benefits"></a>
</h2>
<p>The wordpredictor package provides an easy to use framework for working with n-gram models. It allows n-gram model generation, performance evaluation and word prediction.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>The n-gram language model requires a lot of memory for storing the n-grams. The wordpredictor package has been tested on a machine with dual core processor and 4 GB of RAM. It works well for input data files of size less than 40 Mb and n-gram size 4. For larger data files and n-gram size, more memory and CPU power will be needed.</p>
</div>
<div class="section level2">
<h2 id="future-work">Future Work<a class="anchor" aria-label="anchor" href="#future-work"></a>
</h2>
<p>The wordpredictor package may be extended by adding support for different smoothing techniques such as <a href="https://en.wikipedia.org/wiki/Good%E2%80%93Turing_frequency_estimation" class="external-link">Good-Turing</a>, <a href="https://en.wikipedia.org/wiki/Katz%27s_back-off_model" class="external-link">Katz-Back-off</a> and handling of <a href="https://en.wikipedia.org/wiki/N-gram#Out-of-vocabulary_words" class="external-link">Out Of Vocabulary Words</a>.</p>
<p>Support for different types of n-gram models such as <a href="https://en.wikipedia.org/wiki/N-gram#Skip-gram" class="external-link">Skip-Grams</a> and <a href="https://en.wikipedia.org/wiki/N-gram#Syntactic_n-grams" class="external-link">Syntatic n-grams</a>.</p>
<p>The wordpredictor package is used for predicting words. It may be extended to support other use cases such as spelling correction, biological sequence analysis, data compression and more. This will require further performance optimization.</p>
<p>The source code is organized using R6 classes. It is easy to extend. Contributions are welcome !.</p>
</div>
<div class="section level2">
<h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>I was motivated to develop the wordpredictor package after taking the courses in the <a href="https://www.coursera.org/specializations/jhu-data-science" class="external-link">Data Science Specialization</a> offered by John Hopkins university on Coursera. I would like to thank the course instructors for making the courses interesting and motivating for the students.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=wordpredictor" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/pakjiddat/word-predictor/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/pakjiddat/word-predictor/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing wordpredictor</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nadir Latif <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7543-7405" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pakjiddat/word-predictor/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/pakjiddat/word-predictor/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/pakjiddat/word-predictor/actions/workflows/lint.yaml" class="external-link"><img src="https://github.com/pakjiddat/word-predictor/workflows/lint.yaml/badge.svg" alt="Lint"></a></li>
<li><a href="https://github.com/pakjiddat/word-predictor/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/pakjiddat/word-predictor/workflows/test-coverage.yaml/badge.svg" alt="Test Coverage"></a></li>
<li><a href="https://app.codecov.io/gh/pakjiddat/word-predictor?branch=master" class="external-link"><img src="https://codecov.io/gh/pakjiddat/word-predictor/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=wordpredictor" class="external-link"><img src="https://www.r-pkg.org/badges/version/wordpredictor" alt="CRAN version"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nadir Latif.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
