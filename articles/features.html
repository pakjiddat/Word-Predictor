<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Features â€¢ wordpredictor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Features">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wordpredictor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/features.html">Features</a></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pakjiddat/word-predictor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Features</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pakjiddat/word-predictor/blob/master/vignettes/features.Rmd" class="external-link"><code>vignettes/features.Rmd</code></a></small>
      <div class="d-none name"><code>features.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document describes all the features provided by the
<strong>wordpredictor</strong> package. It first describes how to
generate n-gram models. Next it describes how to evaluate the
performance of the n-gram models. Finally it describes how to make word
predictions using the n-gram model.</p>
</div>
<div class="section level2">
<h2 id="environment-setup-code">Environment setup code<a class="anchor" aria-label="anchor" href="#environment-setup-code"></a>
</h2>
<p>The following code should be run before running the examples.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pakjiddat/word-predictor" class="external-link">wordpredictor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The level of verbosity in the information messages</span></span>
<span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Used to setup the test environment</span></span>
<span><span class="co">#' @param rf The required files.</span></span>
<span><span class="co">#' @param ve The verbosity level.</span></span>
<span><span class="co">#' @return The list of directories in the test environment</span></span>
<span><span class="va">setup_env</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># An object of class EnvManager is created</span></span>
<span>    <span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>rp <span class="op">=</span> <span class="st">"../"</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span>    <span class="co"># The required files are downloaded</span></span>
<span>    <span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ed</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#' @description</span></span>
<span><span class="co">#' Used to clean up the test environment</span></span>
<span><span class="va">clean_up</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># An object of class EnvManager is created</span></span>
<span>    <span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span>    <span class="co"># The test environment is removed</span></span>
<span>    <span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="cn">F</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-generation">Model Generation<a class="anchor" aria-label="anchor" href="#model-generation"></a>
</h2>
<p>The <strong>wordpredictor</strong> package provides several classes
that can be used to generate n-gram models. These classes may be used to
generate n-gram models step by step. An alternative is to use the
<strong>ModelGenerator</strong> class which combines all the steps and
provides a single method for generating n-gram models.</p>
<p>The following steps are involved in generating n-gram models:</p>
<div class="section level3">
<h3 id="data-exploration">Data Exploration<a class="anchor" aria-label="anchor" href="#data-exploration"></a>
</h3>
<p>The first step in generating a n-gram model is data exploration. This
involves determining the type of textual content and various text
related statistics. The type of text may be news content, blog posts,
Twitter feeds, product reviews, customer chat history etc. Example of
text related statistics are line count, word count, average line length
and input file size.</p>
<p>It is also important to determine the unwanted words and symbols in
the data such as vulgar words, punctuation symbols, non-alphabetical
symbols etc. The <strong>wordpredictor</strong> package provides the
<strong>DataAnalyzer</strong> class which can be used to find out
statistics about the input data. The following example shows how to get
statistics on all text files within a folder:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"test.txt"</span>,</span>
<span>  <span class="st">"validate.txt"</span>,</span>
<span>  <span class="st">"validate-clean.txt"</span>,</span>
<span>  <span class="st">"test-clean.txt"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The DataAnalyzer object is created</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># Information on all text files in the ed folder is returned</span></span>
<span><span class="va">fi</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">get_file_info</span><span class="op">(</span><span class="va">ed</span><span class="op">)</span></span>
<span><span class="co"># The file information is printed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fi</span><span class="op">)</span></span>
<span><span class="co">#&gt; $file_stats</span></span>
<span><span class="co">#&gt;                                   fn total_lc max_ll min_ll mean_ll   size</span></span>
<span><span class="co">#&gt; 1     /tmp/RtmpcFJ2MG/test-clean.txt       73     50     25      39 2.8 Kb</span></span>
<span><span class="co">#&gt; 2           /tmp/RtmpcFJ2MG/test.txt       73     51     28      41   3 Kb</span></span>
<span><span class="co">#&gt; 3 /tmp/RtmpcFJ2MG/validate-clean.txt       75     48     10      37 2.8 Kb</span></span>
<span><span class="co">#&gt; 4       /tmp/RtmpcFJ2MG/validate.txt       73     50     31      40 2.9 Kb</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $overall_stats</span></span>
<span><span class="co">#&gt;   total_lc max_ll min_ll mean_ll total_s</span></span>
<span><span class="co">#&gt; 1      294     51     31      41 11.5 Kb</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The word count of a text file can be fetched using the command:
<code>cat file-name | wc -w</code>. This command should work on all Unix
based systems.</p>
</div>
<div class="section level3">
<h3 id="data-sampling">Data Sampling<a class="anchor" aria-label="anchor" href="#data-sampling"></a>
</h3>
<p>The next step is to generate training, testing and validation samples
from the input text file. If there are many input text files, then they
can be combined to a single file using the command:
<code>cat file-1 file-2 file3 &gt; output-file</code>. The contents of
the combined text file may need to be randomized.</p>
<p>The <strong>wordpredictor</strong> package provides the
<strong>DataSampler</strong> class which can be used to generate a
random sample containing given number of lines. The following example
shows how to generate a random sample of size 10 Mb from an input text
file:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The sample size as a proportion of the input.txt file</span></span>
<span><span class="va">ssize</span> <span class="op">&lt;-</span> <span class="fl">0.1</span></span>
<span><span class="co"># The data file path</span></span>
<span><span class="va">dfp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/input.txt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The object size is formatted</span></span>
<span><span class="va">obj_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">dfp</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10</span><span class="op">^</span><span class="fl">6</span></span>
<span><span class="co"># The proportion of data to sample</span></span>
<span><span class="va">prop</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">ssize</span> <span class="op">/</span> <span class="va">obj_size</span><span class="op">)</span></span>
<span><span class="co"># An object of class DataSampler is created</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataSampler.html">DataSampler</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>dir <span class="op">=</span> <span class="va">ed</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The sample file is generated.</span></span>
<span><span class="co"># The randomized sample is saved to the file train.txt in the ed folder</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="fu">generate_sample</span><span class="op">(</span></span>
<span>    fn <span class="op">=</span>  <span class="st">"input.txt"</span>,</span>
<span>    ss <span class="op">=</span> <span class="va">prop</span>,</span>
<span>    ic <span class="op">=</span> <span class="cn">F</span>,</span>
<span>    ir <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    ofn <span class="op">=</span> <span class="st">"train.txt"</span>,</span>
<span>    is <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>Usually we need a train data set for generating the n-gram model. A
test data set for testing the model and a validation data set for
evaluating the performance of the model. The following example shows how
to generate the train, test and validation files. The train file
contains the first 80% of the lines, the test set contains the next 10%
of the lines. The remaining lines are in the validation set.</p>
<p>The data in the validation file must be different from the data in
the train file. Otherwise it can result in over-fitting of the model.
When a model is over-fitted, the model evaluation results will be
exaggerated, overly optimistic and unreliable. So care should be taken
to ensure that the data in the validation and train files is
different.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># An object of class DataSampler is created</span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataSampler.html">DataSampler</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>dir <span class="op">=</span> <span class="va">ed</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The train, test and validation files are generated</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="fu">generate_data</span><span class="op">(</span></span>
<span>    fn <span class="op">=</span>  <span class="st">"input.txt"</span>,</span>
<span>    percs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"train"</span> <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>        <span class="st">"test"</span> <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>        <span class="st">"validate"</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>In the above example, <strong>dir</strong> parameter is the directory
containing the <strong>input.txt</strong> file and the generated test,
validation and train data files.</p>
</div>
<div class="section level3">
<h3 id="data-cleaning">Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"></a>
</h3>
<p>The next step is to remove unwanted symbols and words from the input
text file. This reduces the memory requirement of the n-gram model and
makes it more efficient. Example of unwanted words are vulgar words,
words that are not part of the vocabulary, punctuation, numbers,
non-printable characters and extra spaces.</p>
<p>The <strong>wordpredictor</strong> package provides the
<strong>DataCleaner</strong> class which can be used to remove unwanted
words and symbols from text files. The following example shows how to
clean a given text file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The data file path</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The clean file path</span></span>
<span><span class="va">cfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/input-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># The data cleaning options</span></span>
<span><span class="va">dc_opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"min_words"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    <span class="st">"to_lower"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    <span class="st">"remove_stop"</span> <span class="op">=</span> <span class="cn">F</span>,</span>
<span>    <span class="st">"remove_punct"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    <span class="st">"remove_non_dict"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    <span class="st">"remove_non_alpha"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    <span class="st">"remove_extra_space"</span> <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    <span class="st">"remove_bad"</span> <span class="op">=</span> <span class="cn">F</span>,</span>
<span>    <span class="st">"output_file"</span> <span class="op">=</span> <span class="va">cfn</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># The data cleaner object is created</span></span>
<span><span class="va">dc</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataCleaner.html">DataCleaner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">fn</span>, <span class="va">dc_opts</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The sample file is cleaned and saved as input-clean.txt in the ed dir</span></span>
<span><span class="va">dc</span><span class="op">$</span><span class="fu">clean_file</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The <strong>clean_file</strong> method reads a certain number of
lines at a time, cleans the lines of text and saves them to an output
text file. It can be used for cleaning large text files.</p>
</div>
<div class="section level3">
<h3 id="tokenization">Tokenization<a class="anchor" aria-label="anchor" href="#tokenization"></a>
</h3>
<p>The next step is to generate n-gram tokens from the cleaned text
file. The <strong>TokenGenerator</strong> class allows generating n-gram
tokens of given size from a given input text file. The following example
shows how to generate n-grams tokens of size 1,2,3 and 4:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test file path</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/test-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># The n-grams are generated</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">n</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># The ngram number is set</span></span>
<span>  <span class="va">tg_opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"n"</span> <span class="op">=</span> <span class="va">n</span>, <span class="st">"save_ngrams"</span> <span class="op">=</span> <span class="cn">T</span>, dir <span class="op">=</span> <span class="va">ed</span><span class="op">)</span></span>
<span>  <span class="co"># The TokenGenerator object is created</span></span>
<span>  <span class="va">tg</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TokenGenerator.html">TokenGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">fn</span>, <span class="va">tg_opts</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span>  <span class="co"># The ngram tokens are generated</span></span>
<span>  <span class="va">tg</span><span class="op">$</span><span class="fu">generate_tokens</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The above code generates the files <strong>n1.RDS, n2.RDS, n3.RDS and
n4.RDS</strong> in the data directory. These files contains n-gram
tokens along with their frequencies. N-grams of larger size provide more
context. Usually n-grams of size 4 are generated.</p>
<p>Two important customization options supported by the
<strong>TokenGenerator</strong> class are <strong>min_freq</strong> and
<strong>stem_words</strong>. <strong>min_freq</strong> sets minimum
frequency for n-gram tokens. All n-gram tokens with frequency less than
<strong>min_freq</strong> are excluded.</p>
<p>The <strong>stem_words</strong> option is used to transform n-gram
prefix components to their stems. The next word is not transformed.</p>
<p>The n-gram token frequencies may be analyzed using the
<strong>DataAnalyzer</strong> class. The following example displays the
top most occurring 2-gram tokens:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The ngram file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The DataAnalyzer object is created</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">fn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The top features plot is checked</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">plot_n_gram_stats</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"type"</span> <span class="op">=</span> <span class="st">"top_features"</span>,</span>
<span>    <span class="st">"n"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    <span class="st">"save_to"</span> <span class="op">=</span> <span class="st">"png"</span>,</span>
<span>    <span class="st">"dir"</span> <span class="op">=</span> <span class="st">"./reference/figures"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The output file path</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"./reference/figures/top_features.png"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference%2Ffigures%2Ftop_features.png" width="70%" height="70%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The following example shows the distribution of word frequencies:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The ngram file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The DataAnalyzer object is created</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">fn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The top features plot is checked</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">plot_n_gram_stats</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"type"</span> <span class="op">=</span> <span class="st">"coverage"</span>,</span>
<span>    <span class="st">"n"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    <span class="st">"save_to"</span> <span class="op">=</span> <span class="st">"png"</span>,</span>
<span>    <span class="st">"dir"</span> <span class="op">=</span> <span class="st">"./reference/figures"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The output file path</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"./reference/figures/coverage.png"</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference%2Ffigures%2Fcoverage.png" width="70%" height="70%"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The following example returns top 10 2-gram tokens that start with
<strong>and_</strong>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The ngram file name</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/n2.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The DataAnalyzer object is created</span></span>
<span><span class="va">da</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataAnalyzer.html">DataAnalyzer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># Bi-grams starting with "and_" are returned</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">da</span><span class="op">$</span><span class="fu">get_ngrams</span><span class="op">(</span>fn <span class="op">=</span> <span class="va">fn</span>, c <span class="op">=</span> <span class="fl">10</span>, pre <span class="op">=</span> <span class="st">"^and_*"</span><span class="op">)</span></span>
<span><span class="co"># The data frame is sorted by frequency</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">freq</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co"># The first 10 rows of the data frame are printed</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span>, col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Prefix"</span>, <span class="st">"Frequency"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Prefix</th>
<th align="right">Frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">and_the</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">and_cart</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">and_fired</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">and_forget</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">and_leave</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">and_open</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">and_out</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">and_phrase</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">and_say</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">and_tea</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="transition-probabilities">Transition Probabilities<a class="anchor" aria-label="anchor" href="#transition-probabilities"></a>
</h3>
<p>The next step in generating the n-gram model is to generate
transition probabilities (tp) from the n-gram files. The
<strong>TPGenerator</strong> class is used to generate the tps. For each
n-gram token file a corresponding tp file is generated.</p>
<p>The tp files are then combined into a single file containing tp data
for n-grams of size 1, 2, 3, 4 etc.</p>
<p>The following example shows how to generate combined tps for n-grams
of size 1, 2, 3 and 4:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n1.RDS"</span>, <span class="st">"n2.RDS"</span>, <span class="st">"n3.RDS"</span>, <span class="st">"n4.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The TPGenerator object is created</span></span>
<span><span class="va">tp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TPGenerator.html">TPGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span>, dir <span class="op">=</span> <span class="va">ed</span><span class="op">)</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The combined transition probabilities are generated</span></span>
<span><span class="va">tp</span><span class="op">$</span><span class="fu">generate_tp</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The above code produces the file <strong>model-4.RDS</strong>.</p>
</div>
<div class="section level3">
<h3 id="the-model-file">The model file<a class="anchor" aria-label="anchor" href="#the-model-file"></a>
</h3>
<p>The final step is to generate a n-gram model file from the files
generated in the previous steps. The <strong>Model</strong> class
contains the method <strong>load_model</strong>, which reads the
combined tps files and other files that are used by the model. An
instance of the <strong>Model</strong> class represents the n-gram
model.</p>
</div>
<div class="section level3">
<h3 id="generating-the-model-in-one-step">Generating the model in one step<a class="anchor" aria-label="anchor" href="#generating-the-model-in-one-step"></a>
</h3>
<p>All the previous steps may be combined into a single step. The
<strong>ModelGenerator</strong> class allows generating the final n-gram
model using a single method call. The following example generates a
n-gram model using default data cleaning and tokenization options:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"input.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The following code generates n-gram model using default options for data</span></span>
<span><span class="co"># cleaning and tokenization. See the following section on how to customize these</span></span>
<span><span class="co"># options. Note that input.txt is the name of the input data file. It should be</span></span>
<span><span class="co"># present in the data directory. dir is the directory containing the input and</span></span>
<span><span class="co"># output files. It is set to the path of the environment directory, ed.</span></span>
<span></span>
<span><span class="co"># ModelGenerator class object is created</span></span>
<span><span class="va">mg</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelGenerator.html">ModelGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"def-model"</span>,</span>
<span>    desc <span class="op">=</span> <span class="st">"N-gram model generating using default options"</span>,</span>
<span>    fn <span class="op">=</span> <span class="st">"def-model.RDS"</span>,</span>
<span>    df <span class="op">=</span> <span class="st">"input.txt"</span>,</span>
<span>    n <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    ssize <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    dir <span class="op">=</span> <span class="va">ed</span>,</span>
<span>    dc_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    tg_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    ve <span class="op">=</span> <span class="va">ve</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generates n-gram model. The output is the file def-model.RDS</span></span>
<span><span class="va">mg</span><span class="op">$</span><span class="fu">generate_model</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="evaluating-the-model-performance">Evaluating the model performance<a class="anchor" aria-label="anchor" href="#evaluating-the-model-performance"></a>
</h2>
<p>The <strong>wordpredictor</strong> package provides the
<strong>ModelEvaluator</strong> class for evaluating the performance of
the generated n-gram model. Intrinsic and Extrinsic evaluation are
supported. Also the performance of several n-gram models may be
compared.</p>
<p>The following example performs Intrinsic evaluation. It measures the
Perplexity score for each sentence in the
<strong>validation.txt</strong> file, that was generated in the data
sampling step. It returns the minimum, mean and maximum Perplexity score
for each line.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span>, <span class="st">"validate-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The path to the cleaned validation file</span></span>
<span><span class="va">vfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/validate-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># ModelEvaluator class object is created</span></span>
<span><span class="va">me</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelEvaluator.html">ModelEvaluator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The intrinsic evaluation is performed on first 20 lines</span></span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="va">me</span><span class="op">$</span><span class="fu">intrinsic_evaluation</span><span class="op">(</span>lc <span class="op">=</span> <span class="fl">20</span>, fn <span class="op">=</span> <span class="va">vfn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
<p>The following example performs Extrinsic evaluation. It measures the
accuracy score for each sentence in <strong>validation.txt</strong>
file. For each sentence the model is used to predict the last word in
the sentence given the previous words. If the last word was correctly
predicted, then the prediction is considered to be accurate.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span>, <span class="st">"validate-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The path to the cleaned validation file</span></span>
<span><span class="va">vfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/validate-clean.txt"</span><span class="op">)</span></span>
<span><span class="co"># ModelEvaluator class object is created</span></span>
<span><span class="va">me</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelEvaluator.html">ModelEvaluator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The intrinsic evaluation is performed on first 100 lines</span></span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="va">me</span><span class="op">$</span><span class="fu">extrinsic_evaluation</span><span class="op">(</span>lc <span class="op">=</span> <span class="fl">100</span>, fn <span class="op">=</span> <span class="va">vfn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="making-word-predictions">Making word predictions<a class="anchor" aria-label="anchor" href="#making-word-predictions"></a>
</h2>
<p>The n-gram model generated in the previous step can be used to
predict the next word given a set of words. The following example shows
how to predict the next word. It returns the 3 possible next words along
with their probabilities.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The required files</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># The test environment is setup</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">ve</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class ModelPredictor is created. The mf parameter is the name of</span></span>
<span><span class="co"># the model file that was generated in the previous example.</span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># Given the words: "how are", the next word is predicted. The top 3 most likely</span></span>
<span><span class="co"># next words are returned along with their respective probabilities.</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">predict_word</span><span class="op">(</span>words <span class="op">=</span> <span class="st">"how are"</span>, <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is cleaned up</span></span>
<span><span class="fu">clean_up</span><span class="op">(</span><span class="va">ve</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nadir Latif.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
