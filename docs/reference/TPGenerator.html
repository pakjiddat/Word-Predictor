<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generates transition probabilities for n-grams — TPGenerator • Word Predictor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generates transition probabilities for n-grams — TPGenerator" />
<meta property="og:description" content="It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Word Predictor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/features.html">Features</a>
    </li>
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pakjiddat/word-predictor/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates transition probabilities for n-grams</h1>
    <small class="dont-index">Source: <a href='https://github.com/pakjiddat/word-predictor/blob/master/R/tp-generator.R'><code>R/tp-generator.R</code></a></small>
    <div class="hidden name"><code>TPGenerator.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>It provides a method for generating n-gram transition probabilities.
It reads n-gram frequencies from an input text file that is generated by the
TokenGenerator class.</p>
<p>It parses each n-gram into a prefix, a next word, the next word frequency and
the next word probability. Maximum Likelihood count is used to generate the
next word probabilities.</p>
<p>Each n-gram prefix is converted to a numeric hash using the digest2int
function. The next word is replaced with the position of the next word in the
list of all words. The transition probabilities data is stored as a dataframe
in a file.</p>
<p>Another method is provided that combines the transition probabilities for
n-grams of size 1 to the given size. The combined transition probabilities
can be saved to a file as a data frame. This file may be regarded as a
completed self contained n-gram model. By combining the transition
probabilities of n-grams, back-off may be used to evaluate word probabilities
or predict the next word.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='Base.html'>wordpredictor::Base</a></code> -&gt; <code>TPGenerator</code></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>TPGenerator$new()</code></a></p></li>
<li><p><a href='#method-generate_tp'><code>TPGenerator$generate_tp()</code></a></p></li>
<li><p><a href='#method-generate_tp_for_n'><code>TPGenerator$generate_tp_for_n()</code></a></p></li>
<li><p><a href='#method-clone'><code>TPGenerator$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>It initializes the current obj. It is used to set the
transition probabilities options and verbose option.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>, ve <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>opts</code></dt><dd><p>The options for generating the transition probabilities.
<ul>
<li><p><strong>save_tp</strong>. If the data should be saved.</p></li>
<li><p><strong>n</strong>. The n-gram size.</p></li>
<li><p><strong>dir</strong>. The directory containing the input and output files.</p></li>
<li><p><strong>format</strong>. The format for the output. There are two options.</p><ul>
<li><p><strong>plain</strong>. The data is stored in plain text.</p></li>
<li><p><strong>obj</strong>. The data is stored as a R obj.</p></li>
</ul></li>
</ul></p></dd>

<dt><code>ve</code></dt><dd><p>The level of detail in the information messages.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-generate_tp"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>generate_tp()</code></h3>
<p>It first generates the transition probabilities for each
n-gram of size from 1 to the given size. The transition probabilities
are then combined into a single data frame and saved to the output
folder that is given as parameter to the current object.</p>
<p>By combining the transition probabilities for all n-gram sizes from 1
to n, back-off can be used to calculate next word probabilities or
predict the next word.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>generate_tp</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Examples</h4>
<p><div class="r example copy"></p><pre><span class='co'># Start of environment setup code</span>
<span class='co'># The level of detail in the information messages</span>
<span class='va'>ve</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
<span class='co'># The name of the folder that will contain all the files. It will be</span>
<span class='co'># created in the current directory. NULL implies tempdir will be used</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='cn'>NULL</span>
<span class='co'># The required files. They are default files that are part of the</span>
<span class='co'># package</span>
<span class='va'>rf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"n1.RDS"</span>, <span class='st'>"n2.RDS"</span>, <span class='st'>"n3.RDS"</span>, <span class='st'>"n4.RDS"</span><span class='op'>)</span>
<span class='co'># An object of class EnvManager is created</span>
<span class='va'>em</span> <span class='op'>&lt;-</span> <span class='va'><a href='EnvManager.html'>EnvManager</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>ve <span class='op'>=</span> <span class='va'>ve</span>, rp <span class='op'>=</span> <span class='st'>"./"</span><span class='op'>)</span>
<span class='co'># The required files are downloaded</span>
<span class='va'>ed</span> <span class='op'>&lt;-</span> <span class='va'>em</span><span class='op'>$</span><span class='fu'>setup_env</span><span class='op'>(</span><span class='va'>rf</span>, <span class='va'>fn</span><span class='op'>)</span>
<span class='co'># End of environment setup code</span>

<span class='co'># The list of output files</span>
<span class='va'>fns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"words"</span>, <span class='st'>"model-4"</span>, <span class='st'>"tp2"</span>, <span class='st'>"tp3"</span>, <span class='st'>"tp4"</span><span class='op'>)</span>

<span class='co'># The TPGenerator object is created</span>
<span class='va'>tp</span> <span class='op'>&lt;-</span> <span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>4</span>, dir <span class='op'>=</span> <span class='va'>ed</span><span class='op'>)</span>, ve <span class='op'>=</span> <span class='va'>ve</span><span class='op'>)</span>
<span class='co'># The combined transition probabilities are generated</span>
<span class='va'>tp</span><span class='op'>$</span><span class='fu'>generate_tp</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># The test environment is removed. Comment the below line, so the</span>
<span class='co'># files generated by the function can be viewed</span>
<span class='va'>em</span><span class='op'>$</span><span class='fu'>td_env</span><span class='op'>(</span><span class='op'>)</span>
</pre><p></div></p>

<p><hr>
<a id="method-generate_tp_for_n"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>generate_tp_for_n()</code></h3>
<p>It generates the transition probabilities table for the
given n-gram size. It first reads n-gram token frequencies from an
input text file.</p>
<p>It then generates a data frame whose columns are the
n-gram prefix, next word and next word frequency. The data frame may
be saved to a file as plain text or as a R obj. If n = 1, then the
list of words is saved.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>generate_tp_for_n</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>n</code></dt><dd><p>The n-gram size for which the tp data is generated.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `TPGenerator$generate_tp`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'># Start of environment setup code</span>
<span class='co'># The level of detail in the information messages</span>
<span class='va'>ve</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
<span class='co'># The name of the folder that will contain all the files. It will be</span>
<span class='co'># created in the current directory. NULL implies tempdir will be used</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='cn'>NULL</span>
<span class='co'># The required files. They are default files that are part of the</span>
<span class='co'># package</span>
<span class='va'>rf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"n1.RDS"</span>, <span class='st'>"n2.RDS"</span>, <span class='st'>"n3.RDS"</span>, <span class='st'>"n4.RDS"</span><span class='op'>)</span>
<span class='co'># An object of class EnvManager is created</span>
<span class='va'>em</span> <span class='op'>&lt;-</span> <span class='va'><a href='EnvManager.html'>EnvManager</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>ve <span class='op'>=</span> <span class='va'>ve</span>, rp <span class='op'>=</span> <span class='st'>"./"</span><span class='op'>)</span>
<span class='co'># The required files are downloaded</span>
<span class='va'>ed</span> <span class='op'>&lt;-</span> <span class='va'>em</span><span class='op'>$</span><span class='fu'>setup_env</span><span class='op'>(</span><span class='va'>rf</span>, <span class='va'>fn</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "CITATION" "examples" "extdata" </div><div class='input'><span class='co'># End of environment setup code</span>

<span class='co'># The list of output files</span>
<span class='va'>fns</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"words"</span>, <span class='st'>"model-4"</span>, <span class='st'>"tp2"</span>, <span class='st'>"tp3"</span>, <span class='st'>"tp4"</span><span class='op'>)</span>

<span class='co'># The TPGenerator object is created</span>
<span class='va'>tp</span> <span class='op'>&lt;-</span> <span class='va'>TPGenerator</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>opts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>4</span>, dir <span class='op'>=</span> <span class='va'>ed</span><span class='op'>)</span>, ve <span class='op'>=</span> <span class='va'>ve</span><span class='op'>)</span>
<span class='co'># The combined transition probabilities are generated</span>
<span class='va'>tp</span><span class='op'>$</span><span class='fu'>generate_tp</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># The test environment is removed. Comment the below line, so the</span>
<span class='co'># files generated by the function can be viewed</span>
<span class='va'>em</span><span class='op'>$</span><span class='fu'>td_env</span><span class='op'>(</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nadir Latif.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


