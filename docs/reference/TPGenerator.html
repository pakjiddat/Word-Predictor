<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off."><title>Generates transition probabilities for n-grams — TPGenerator • Word Predictor</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generates transition probabilities for n-grams — TPGenerator"><meta property="og:description" content="It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Word Predictor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/features.html">Features</a>
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pakjiddat/word-predictor/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generates transition probabilities for n-grams</h1>
      <small class="dont-index">Source: <a href="https://github.com/pakjiddat/word-predictor/blob/HEAD/R/tp-generator.R" class="external-link"><code>R/tp-generator.R</code></a></small>
      <div class="d-none name"><code>TPGenerator.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It provides a method for generating transition probabilities for
the given n-gram size. It also provides a method for generating the combined
transition probabilities data for n-gram sizes from 1 to the given size. The
combined transition probabilities data can be used to implement back-off.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It provides a method for generating n-gram transition probabilities.
It reads n-gram frequencies from an input text file that is generated by the
TokenGenerator class.</p>
<p>It parses each n-gram into a prefix, a next word, the next word frequency and
the next word probability. Maximum Likelihood count is used to generate the
next word probabilities.</p>
<p>Each n-gram prefix is converted to a numeric hash using the digest2int
function. The next word is replaced with the position of the next word in the
list of all words. The transition probabilities data is stored as a dataframe
in a file.</p>
<p>Another method is provided that combines the transition probabilities for
n-grams of size 1 to the given size. The combined transition probabilities
can be saved to a file as a data frame. This file may be regarded as a
completed self contained n-gram model. By combining the transition
probabilities of n-grams, back-off may be used to evaluate word probabilities
or predict the next word.</p>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="Base.html">wordpredictor::Base</a></code> -&gt; <code>TPGenerator</code></p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-new"><code>TPGenerator$new()</code></a></p></li>
<li><p><a href="#method-generate_tp"><code>TPGenerator$generate_tp()</code></a></p></li>
<li><p><a href="#method-generate_tp_for_n"><code>TPGenerator$generate_tp_for_n()</code></a></p></li>
<li><p><a href="#method-clone"><code>TPGenerator$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul></ul></details></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>It initializes the current obj. It is used to set the
transition probabilities options and verbose option.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/TPGenerator.html">TPGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, ve <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>opts</code></dt>
<dd><p>The options for generating the transition probabilities.</p><ul><li><p><strong>save_tp</strong>. If the data should be saved.</p></li>
<li><p><strong>n</strong>. The n-gram size.</p></li>
<li><p><strong>dir</strong>. The directory containing the input and output files.</p></li>
<li><p><strong>format</strong>. The format for the output. There are two options.</p><ul><li><p><strong>plain</strong>. The data is stored in plain text.</p></li>
<li><p><strong>obj</strong>. The data is stored as a R obj.</p></li>
</ul></li>
</ul></dd>


<dt><code>ve</code></dt>
<dd><p>The level of detail in the information messages.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-generate_tp"></a><div class="section">
<h3 id="method-generate-tp-">Method <code>generate_tp()</code><a class="anchor" aria-label="anchor" href="#method-generate-tp-"></a></h3>
<p>It first generates the transition probabilities for each
n-gram of size from 1 to the given size. The transition probabilities
are then combined into a single data frame and saved to the output
folder that is given as parameter to the current object.</p>
<p>By combining the transition probabilities for all n-gram sizes from 1
to n, back-off can be used to calculate next word probabilities or
predict the next word.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">TPGenerator</span><span class="op">$</span><span class="fu">generate_tp</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span class="co"># Start of environment setup code</span>
<span class="co"># The level of detail in the information messages</span>
<span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="co"># The name of the folder that will contain all the files. It will be</span>
<span class="co"># created in the current directory. NULL implies tempdir will be used</span>
<span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="co"># The required files. They are default files that are part of the</span>
<span class="co"># package</span>
<span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n1.RDS"</span>, <span class="st">"n2.RDS"</span>, <span class="st">"n3.RDS"</span>, <span class="st">"n4.RDS"</span><span class="op">)</span>
<span class="co"># An object of class EnvManager is created</span>
<span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, rp <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span>
<span class="co"># The required files are downloaded</span>
<span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span>
<span class="co"># End of environment setup code</span>

<span class="co"># The list of output files</span>
<span class="va">fns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"words"</span>, <span class="st">"model-4"</span>, <span class="st">"tp2"</span>, <span class="st">"tp3"</span>, <span class="st">"tp4"</span><span class="op">)</span>

<span class="co"># The TPGenerator object is created</span>
<span class="va">tp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/TPGenerator.html">TPGenerator</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span>, dir <span class="op">=</span> <span class="va">ed</span><span class="op">)</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span>
<span class="co"># The combined transition probabilities are generated</span>
<span class="va">tp</span><span class="op">$</span><span class="fu">generate_tp</span><span class="op">(</span><span class="op">)</span>

<span class="co"># The test environment is removed. Comment the below line, so the</span>
<span class="co"># files generated by the function can be viewed</span>
<span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-generate_tp_for_n"></a><div class="section">
<h3 id="method-generate-tp-for-n-">Method <code>generate_tp_for_n()</code><a class="anchor" aria-label="anchor" href="#method-generate-tp-for-n-"></a></h3>
<p>It generates the transition probabilities table for the
given n-gram size. It first reads n-gram token frequencies from an
input text file.</p>
<p>It then generates a data frame whose columns are the
n-gram prefix, next word and next word frequency. The data frame may
be saved to a file as plain text or as a R obj. If n = 1, then the
list of words is saved.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">TPGenerator</span><span class="op">$</span><span class="fu">generate_tp_for_n</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>The n-gram size for which the tp data is generated.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">TPGenerator</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `TPGenerator$generate_tp`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Start of environment setup code</span></span>
<span class="r-in"><span class="co"># The level of detail in the information messages</span></span>
<span class="r-in"><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span class="r-in"><span class="co"># The name of the folder that will contain all the files. It will be</span></span>
<span class="r-in"><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span>
<span class="r-in"><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span class="r-in"><span class="co"># The required files. They are default files that are part of the</span></span>
<span class="r-in"><span class="co"># package</span></span>
<span class="r-in"><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n1.RDS"</span>, <span class="st">"n2.RDS"</span>, <span class="st">"n3.RDS"</span>, <span class="st">"n4.RDS"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># An object of class EnvManager is created</span></span>
<span class="r-in"><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, rp <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># The required files are downloaded</span></span>
<span class="r-in"><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># End of environment setup code</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The list of output files</span></span>
<span class="r-in"><span class="va">fns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"words"</span>, <span class="st">"model-4"</span>, <span class="st">"tp2"</span>, <span class="st">"tp3"</span>, <span class="st">"tp4"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The TPGenerator object is created</span></span>
<span class="r-in"><span class="va">tp</span> <span class="op">&lt;-</span> <span class="va">TPGenerator</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span>, dir <span class="op">=</span> <span class="va">ed</span><span class="op">)</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># The combined transition probabilities are generated</span></span>
<span class="r-in"><span class="va">tp</span><span class="op">$</span><span class="fu">generate_tp</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The test environment is removed. Comment the below line, so the</span></span>
<span class="r-in"><span class="co"># files generated by the function can be viewed</span></span>
<span class="r-in"><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nadir Latif.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

