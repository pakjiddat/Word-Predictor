<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Allows predicting text, calculating word probabilities and Perplexity — ModelPredictor • wordpredictor</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Allows predicting text, calculating word probabilities and Perplexity — ModelPredictor"><meta name="description" content="It provides a method for predicting the new word given a set of
previous words. It also provides a method for calculating the Perplexity
score for a set of words. Furthermore it provides a method for calculating
the probability of a given word and set of previous words."><meta property="og:description" content="It provides a method for predicting the new word given a set of
previous words. It also provides a method for calculating the Perplexity
score for a set of words. Furthermore it provides a method for calculating
the probability of a given word and set of previous words."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wordpredictor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/features.html">Features</a></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pakjiddat/word-predictor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Allows predicting text, calculating word probabilities and Perplexity</h1>
      <small class="dont-index">Source: <a href="https://github.com/pakjiddat/word-predictor/blob/HEAD/R/model-predictor.R" class="external-link"><code>R/model-predictor.R</code></a></small>
      <div class="d-none name"><code>ModelPredictor.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It provides a method for predicting the new word given a set of
previous words. It also provides a method for calculating the Perplexity
score for a set of words. Furthermore it provides a method for calculating
the probability of a given word and set of previous words.</p>
    </div>


    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="Base.html">wordpredictor::Base</a></code> -&gt; <code>ModelPredictor</code></p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-ModelPredictor-new"><code>ModelPredictor$new()</code></a></p></li>
<li><p><a href="#method-ModelPredictor-get_model"><code>ModelPredictor$get_model()</code></a></p></li>
<li><p><a href="#method-ModelPredictor-calc_perplexity"><code>ModelPredictor$calc_perplexity()</code></a></p></li>
<li><p><a href="#method-ModelPredictor-predict_word"><code>ModelPredictor$predict_word()</code></a></p></li>
<li><p><a href="#method-ModelPredictor-get_word_prob"><code>ModelPredictor$get_word_prob()</code></a></p></li>
<li><p><a href="#method-ModelPredictor-clone"><code>ModelPredictor$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-ModelPredictor-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>It initializes the current object. It is used to set the
model file name and verbose options.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mf</span>, ve <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>mf</code></dt>
<dd><p>The model file name.</p></dd>


<dt><code>ve</code></dt>
<dd><p>The level of detail in the information messages.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-ModelPredictor-get_model"></a><div class="section">
<h3 id="method-get-model-">Method <code>get_model()</code><a class="anchor" aria-label="anchor" href="#method-get-model-"></a></h3>
<p>Returns the Model class object.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">get_model</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>The Model class object is returned.</p>
</div>

</div><p></p><hr><a id="method-ModelPredictor-calc_perplexity"></a><div class="section">
<h3 id="method-calc-perplexity-">Method <code>calc_perplexity()</code><a class="anchor" aria-label="anchor" href="#method-calc-perplexity-"></a></h3>
<p>The Perplexity for the given sentence is calculated. For
each word, the probability of the word given the previous words is
calculated. The probabilities are multiplied and then inverted. The
nth root of the result is the perplexity, where n is the number of
words in the sentence. If the stem_words tokenization option was
specified when creating the given model file, then the previous words
are converted to their stems.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">calc_perplexity</span><span class="op">(</span><span class="va">words</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>words</code></dt>
<dd><p>The list of words.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>The perplexity of the given list of words.</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co"># Start of environment setup code</span></span>
<span><span class="co"># The level of detail in the information messages</span></span>
<span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="co"># The name of the folder that will contain all the files. It will be</span></span>
<span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="co"># The required files. They are default files that are part of the</span></span>
<span><span class="co"># package</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class EnvManager is created</span></span>
<span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, rp <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span>
<span><span class="co"># The required files are downloaded</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span>
<span><span class="co"># End of environment setup code</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># ModelPredictor class object is created</span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The sentence whoose Perplexity is to be calculated</span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="st">"last year at this time i was preparing for a trip to rome"</span></span>
<span><span class="co"># The line is split in to words</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">l</span>, <span class="st">" "</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co"># The Perplexity of the sentence is calculated</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">calc_perplexity</span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span>
<span><span class="co"># The sentence Perplexity is printed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co"># The test environment is removed. Comment the below line, so the</span></span>
<span><span class="co"># files generated by the function can be viewed</span></span>
<span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ModelPredictor-predict_word"></a><div class="section">
<h3 id="method-predict-word-">Method <code>predict_word()</code><a class="anchor" aria-label="anchor" href="#method-predict-word-"></a></h3>
<p>Predicts the next word given a list of previous words. It
checks the last n previous words in the transition probabilities
data, where n is equal to 1 - n-gram size of model. If there is a
match, the top 3 next words with highest probabilities are returned.
If there is no match, then the last n-1 previous words are checked.
This process is continued until the last word is checked. If there is
no match, then empty result is returned. The given words may
optionally be stemmed.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">predict_word</span><span class="op">(</span><span class="va">words</span>, count <span class="op">=</span> <span class="fl">3</span>, dc <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>words</code></dt>
<dd><p>A character vector of previous words or a single vector
containing the previous word text.</p></dd>


<dt><code>count</code></dt>
<dd><p>The number of results to return.</p></dd>


<dt><code>dc</code></dt>
<dd><p>A DataCleaner object. If it is given, then the given words</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>The top 3 predicted words along with their probabilities.</p>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co"># Start of environment setup code</span></span>
<span><span class="co"># The level of detail in the information messages</span></span>
<span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="co"># The name of the folder that will contain all the files. It will be</span></span>
<span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="co"># The required files. They are default files that are part of the</span></span>
<span><span class="co"># package</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class EnvManager is created</span></span>
<span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, <span class="st">"rp"</span> <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span>
<span><span class="co"># The required files are downloaded</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span>
<span><span class="co"># End of environment setup code</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># ModelPredictor class object is created</span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The next word is predicted</span></span>
<span><span class="va">nws</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">predict_word</span><span class="op">(</span><span class="st">"today is"</span>, count <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># The predicted next words are printed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nws</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is removed. Comment the below line, so the</span></span>
<span><span class="co"># files generated by the function can be viewed</span></span>
<span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ModelPredictor-get_word_prob"></a><div class="section">
<h3 id="method-get-word-prob-">Method <code>get_word_prob()</code><a class="anchor" aria-label="anchor" href="#method-get-word-prob-"></a></h3>
<p>Calculates the probability of the given word given the
previous words. The last n words are converted to numeric hash using
digest2int function. All other words are ignored. n is equal to 1 -
size of the n-gram model. The hash is looked up in a data frame of
transition probabilities. The last word is converted to a number by
checking its position in a list of unique words. If the hash and the
word position were found, then the probability of the previous word
and hash is returned. If it was not found, then the hash of the n-1
previous words is taken and the processed is repeated. If the data
was not found in the data frame, then the word probability is
returned. This is known as back-off. If the word probability could
not be found then the default probability is returned. The default
probability is calculated as 1/(N+V), Where N = number of words in
corpus and V is the number of dictionary words.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">get_word_prob</span><span class="op">(</span><span class="va">word</span>, <span class="va">pw</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>word</code></dt>
<dd><p>The word whose probability is to be calculated.</p></dd>


<dt><code>pw</code></dt>
<dd><p>The previous words.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>The probability of the word given the previous words.</p>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co"># Start of environment setup code</span></span>
<span><span class="co"># The level of detail in the information messages</span></span>
<span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="co"># The name of the folder that will contain all the files. It will be</span></span>
<span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="co"># The required files. They are default files that are part of the</span></span>
<span><span class="co"># package</span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># An object of class EnvManager is created</span></span>
<span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, <span class="st">"rp"</span> <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span>
<span><span class="co"># The required files are downloaded</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span>
<span><span class="co"># End of environment setup code</span></span>
<span></span>
<span><span class="co"># The model file name</span></span>
<span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span>
<span><span class="co"># ModelPredictor class object is created</span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ModelPredictor.html">ModelPredictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span>
<span><span class="co"># The probability that the next word is "you" given the prev words</span></span>
<span><span class="co"># "how" and "are"</span></span>
<span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">get_word_prob</span><span class="op">(</span>word <span class="op">=</span> <span class="st">"you"</span>, pw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"how"</span>, <span class="st">"are"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># The probability is printed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The test environment is removed. Comment the below line, so the</span></span>
<span><span class="co"># files generated by the function can be viewed</span></span>
<span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ModelPredictor-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `ModelPredictor$calc_perplexity`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start of environment setup code</span></span></span>
<span class="r-in"><span><span class="co"># The level of detail in the information messages</span></span></span>
<span class="r-in"><span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="co"># The name of the folder that will contain all the files. It will be</span></span></span>
<span class="r-in"><span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="co"># The required files. They are default files that are part of the</span></span></span>
<span class="r-in"><span><span class="co"># package</span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># An object of class EnvManager is created</span></span></span>
<span class="r-in"><span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, rp <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The required files are downloaded</span></span></span>
<span class="r-in"><span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># End of environment setup code</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The model file name</span></span></span>
<span class="r-in"><span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ModelPredictor class object is created</span></span></span>
<span class="r-in"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The sentence whoose Perplexity is to be calculated</span></span></span>
<span class="r-in"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="st">"last year at this time i was preparing for a trip to rome"</span></span></span>
<span class="r-in"><span><span class="co"># The line is split in to words</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">l</span>, <span class="st">" "</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># The Perplexity of the sentence is calculated</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">calc_perplexity</span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The sentence Perplexity is printed</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1767</span>
<span class="r-in"><span><span class="co"># The test environment is removed. Comment the below line, so the</span></span></span>
<span class="r-in"><span><span class="co"># files generated by the function can be viewed</span></span></span>
<span class="r-in"><span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `ModelPredictor$predict_word`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start of environment setup code</span></span></span>
<span class="r-in"><span><span class="co"># The level of detail in the information messages</span></span></span>
<span class="r-in"><span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="co"># The name of the folder that will contain all the files. It will be</span></span></span>
<span class="r-in"><span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="co"># The required files. They are default files that are part of the</span></span></span>
<span class="r-in"><span><span class="co"># package</span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># An object of class EnvManager is created</span></span></span>
<span class="r-in"><span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, <span class="st">"rp"</span> <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The required files are downloaded</span></span></span>
<span class="r-in"><span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># End of environment setup code</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The model file name</span></span></span>
<span class="r-in"><span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ModelPredictor class object is created</span></span></span>
<span class="r-in"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The next word is predicted</span></span></span>
<span class="r-in"><span><span class="va">nws</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">predict_word</span><span class="op">(</span><span class="st">"today is"</span>, count <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The predicted next words are printed</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nws</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $words</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "a"      "the"    "used"   "better" "hard"   "rare"   "to"     "best"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "carved" "dry"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $probs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.17460317 0.11111111 0.06349206 0.03174603 0.03174603 0.03174603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] 0.03174603 0.01587302 0.01587302 0.01587302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The test environment is removed. Comment the below line, so the</span></span></span>
<span class="r-in"><span><span class="co"># files generated by the function can be viewed</span></span></span>
<span class="r-in"><span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `ModelPredictor$get_word_prob`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start of environment setup code</span></span></span>
<span class="r-in"><span><span class="co"># The level of detail in the information messages</span></span></span>
<span class="r-in"><span><span class="va">ve</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="co"># The name of the folder that will contain all the files. It will be</span></span></span>
<span class="r-in"><span><span class="co"># created in the current directory. NULL implies tempdir will be used</span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="co"># The required files. They are default files that are part of the</span></span></span>
<span class="r-in"><span><span class="co"># package</span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># An object of class EnvManager is created</span></span></span>
<span class="r-in"><span><span class="va">em</span> <span class="op">&lt;-</span> <span class="va"><a href="EnvManager.html">EnvManager</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>ve <span class="op">=</span> <span class="va">ve</span>, <span class="st">"rp"</span> <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The required files are downloaded</span></span></span>
<span class="r-in"><span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="va">em</span><span class="op">$</span><span class="fu">setup_env</span><span class="op">(</span><span class="va">rf</span>, <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># End of environment setup code</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The model file name</span></span></span>
<span class="r-in"><span><span class="va">mfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ed</span>, <span class="st">"/def-model.RDS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ModelPredictor class object is created</span></span></span>
<span class="r-in"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va">ModelPredictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>mf <span class="op">=</span> <span class="va">mfn</span>, ve <span class="op">=</span> <span class="va">ve</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The probability that the next word is "you" given the prev words</span></span></span>
<span class="r-in"><span><span class="co"># "how" and "are"</span></span></span>
<span class="r-in"><span><span class="va">prob</span> <span class="op">&lt;-</span> <span class="va">mp</span><span class="op">$</span><span class="fu">get_word_prob</span><span class="op">(</span>word <span class="op">=</span> <span class="st">"you"</span>, pw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"how"</span>, <span class="st">"are"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># The probability is printed</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">prob</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.0024581</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The test environment is removed. Comment the below line, so the</span></span></span>
<span class="r-in"><span><span class="co"># files generated by the function can be viewed</span></span></span>
<span class="r-in"><span><span class="va">em</span><span class="op">$</span><span class="fu">td_env</span><span class="op">(</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nadir Latif.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

